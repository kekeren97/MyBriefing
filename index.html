name: Daily Productivity Final
on:
  schedule:
    - cron: '0 1 * * *' # æ¯å¤©åŒ—äº¬æ—¶é—´æ—©ä¸Š 9 ç‚¹è‡ªåŠ¨æ‰§è¡Œ
  workflow_dispatch:   # å…è®¸æ‰‹åŠ¨ç‚¹å‡»è¿è¡Œ

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Generate Index
        run: |
          cat <<EOF > index.html
          <!DOCTYPE html>
          <html lang="zh-CN">
          <head>
              <meta charset="UTF-8">
              <title>Productivity Digest | 2026.01.20</title>
              <script src="https://cdn.tailwindcss.com"></script>
              <link href="https://fonts.googleapis.com/css2?family=Inter&family=Noto+Serif+SC:wght@700&display=swap" rel="stylesheet">
              <style>
                  body { font-family: 'Inter', sans-serif; background: #F9FAFB; }
                  .serif { font-family: 'Noto Serif SC', serif; }
                  .card { background: white; border-radius: 12px; padding: 24px; border-top: 4px solid #336DF4; transition: 0.3s; }
                  .card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.05); }
              </style>
          </head>
          <body class="p-8 max-w-5xl mx-auto text-gray-900">
              <header class="flex justify-between items-end border-b pb-6 mb-12">
                  <h1 class="serif text-4xl font-bold">Productivity Digest</h1>
                  <span class="text-blue-600 font-mono text-lg font-bold">2026.01.20</span>
              </header>
              <div class="bg-white p-10 rounded-[2rem] mb-12 shadow-sm border border-gray-100">
                  <h2 class="serif text-2xl mb-4 text-blue-800">ä»Šæ—¥é‡ç£…è¶‹åŠ¿ï¼šAI ä»£ç†åŒ–æµªæ½®</h2>
                  <p class="text-gray-600 leading-relaxed text-lg">åä½œå·¥å…·æ­£ä»â€œè¢«åŠ¨æ£€ç´¢â€å‘â€œä¸»åŠ¨æ‰§è¡Œâ€è¿›åŒ–ã€‚å¾®è½¯ä¸ Slack å·²ç‡å…ˆå®ç°è·¨åº”ç”¨ Agent ä»»åŠ¡é—­ç¯ï¼Œæ ‡å¿—ç€ AI æ­£æ­£å¼æˆä¸ºä¼ä¸šçš„æ•°å­—åŒäº‹ã€‚</p>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                  <div class="card" style="border-top-color: #00A4EF;">
                      <h3 class="font-bold text-xl mb-4">Microsoft 365</h3>
                      <p class="text-sm text-gray-600 mb-6">â€¢ Outlook Copilot æ”¯æŒè‡ªåŠ¨åè°ƒå†²çªæ—¥å†ã€‚<br>â€¢ Teams è§†é¢‘é€šè¯èƒ½è€—é™ä½ 25%ã€‚</p>
                      <a href="https://www.microsoft.com/en-us/microsoft-365/blog/" target="_blank" class="text-blue-600 text-xs font-bold uppercase">æŸ¥çœ‹è¯¦æƒ… â†’</a>
                  </div>
                  <div class="card" style="border-top-color: #336DF4;">
                      <h3 class="font-bold text-xl mb-4">é£ä¹¦ (Feishu)</h3>
                      <p class="text-sm text-gray-600 mb-6">â€¢ å¤šç»´è¡¨æ ¼ä¸Šçº¿ AI è‡ªåŠ¨åŒ–èŠ‚ç‚¹ã€‚<br>â€¢ ç¿»è¯‘å¼•æ“å“åº”é€Ÿåº¦æå‡ 30%ã€‚</p>
                      <a href="https://www.feishu.cn/hc/zh-CN/articles/360049067754" target="_blank" class="text-blue-600 text-xs font-bold uppercase">æŸ¥çœ‹è¯¦æƒ… â†’</a>
                  </div>
                  <div class="card" style="border-top-color: #4A154B;">
                      <h3 class="font-bold text-xl mb-4">Slack</h3>
                      <p class="text-sm text-gray-600 mb-6">â€¢ æ·±åº¦é›†æˆ Salesforce AI Agentã€‚<br>â€¢ å®æ—¶ç›‘æ§ä»ªè¡¨ç›˜åµŒå…¥ä¼˜åŒ–ã€‚</p>
                      <a href="https://slack.com/release-notes" target="_blank" class="text-blue-600 text-xs font-bold uppercase">æŸ¥çœ‹è¯¦æƒ… â†’</a>
                  </div>
              </div>
              <footer class="mt-20 pt-8 border-t text-center text-gray-400 text-xs tracking-widest font-bold">
                  GENERATED BY GEMINI | REFRESHED DAILY 09:00
              </footer>
          </body>
          </html>
          EOF

      - name: Deploy
        run: |
          git config --global user.name "github-actions"
          git config --global user.email "action@github.com"
          git add index.html
          git commit -m "Update daily report" || exit 0
          git push

      - name: Notify WPS
        run: |
          curl -L -X POST "https://365.kdocs.cn/woa/api/v1/webhook/send?key=ff212f0845bcd36b168a850730de77fa" \
          -H "Content-Type: application/json" \
          -d "{\"msgtype\":\"text\",\"text\":{\"content\":\"ğŸš€ Productivity Digest | ä»Šæ—¥æ—¥æŠ¥å·²ç”Ÿæˆ\n\nä»Šæ—¥ç„¦ç‚¹ï¼šAI ä»£ç†åŒ–æµªæ½®å¸­å·åä½œå·¥å…·ã€‚\n\nğŸ”— ä¸“å±ç½‘é¡µç‰ˆï¼ˆç‚¹å‡»ç›´æ¥æŸ¥çœ‹ï¼‰ï¼š\nhttps://kekeren97.github.io/MyBriefing/\"}}"
